<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../viewer-method/viewer-method.html">
<link rel="import" href="../viewer-type/viewer-type.html">
<link rel="import" href="../html-echo/html-echo.html">

<dom-module id="viewer-domain">
  <template>
    <paper-material elevation="1">
      <h2 class="heading"><span>{{domain.name}}</span> Domain</h2>

      <p class="description">
        <html-echo html="{{domain.description}}"></html-echo>
      </p>
    </paper-material>

    <h3 hidden="{{!domain.methods}}">Methods</h3>
    <paper-material elevation="1" class="methods" hidden="{{!domain.methods}}">
      <template is="dom-repeat" items="{{domain.methods}}" as="method">
        <viewer-method
          name="{{method.name}}"
          description="{{method.description}}"
          parameters="{{method.parameters}}"
          returns="{{method.returns}}"
          ></viewer-method>
      </template>
    </paper-material>

    <h3 hidden="{{!domain.events}}">Events</h3>
    <paper-material elevation="1" class="events" hidden="{{!domain.events}}">
      <template is="dom-repeat" items="{{domain.events}}" as="event">
        <viewer-method
          name="{{event.name}}"
          description="{{event.description}}"
          parameters="{{event.parameters}}"
          ></viewer-method>
      </template>
    </paper-material>

    <h3 hidden="{{!domain.types}}">Types</h3>
    <paper-material elevation="1" class="types" hidden="{{!domain.types}}">
      <template is="dom-repeat" items="{{domain.types}}" as="type">
        <viewer-type
          name="{{type.id}}"
          description="{{type.description}}"
          type="{{type.type}}"
          object-properties="{{type.properties}}"
          allowed-values="{{type.enum}}"
          array-items="{{type.items}}"
          ></viewer-type>
      </template>
    </paper-material>
  </template>
  <style>
    h3 {
      font-size: 20px;
      line-height: 28px;
    }

    paper-material {
      border-radius: 2px;
      height: 100%;
      padding: 16px 0 16px 0;
      width: calc(98.66% - 16px);
      background: white;
    }

    viewer-method, viewer-type {
      display: block;
      border-bottom: solid var(--divider-color) 1px;
      padding-bottom: 15px;
    }

    viewer-method:last-of-type, viewer-type:last-of-type {
      border-bottom: none;
    }

    /* Breakpoints */

    /* Small */
    @media (max-width: 600px) {
      h3 {
        margin-left: 7px;
      }

      paper-material {
        --menu-container-display: none;
        padding-left: 16px;
        padding-right: 16px;
      }
    }

    /* Tablet+ */
    @media (min-width: 601px) {
      paper-material {
        width: calc(98% - 46px);
        padding-left: 30px;
        padding-right: 30px;
      }
    }
  </style>
</dom-module>
<script>
  (function () {
    Polymer({
      is: 'viewer-domain',
      properties: {
        domain: Object
      },
      ready: function () {
        this.domain = null;
      }
    });
  })();
</script>
